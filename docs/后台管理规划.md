# 后台管理界面规划

## 1. 信息架构

- **一级导航**：仪表盘、内容审核、行程管理、评论管理、用户与角色、系统日志、设置。
- **二级导航**：根据一级模块划分子页面，例如“内容审核”下分为文章审核、稿件详情、审核规则设置。
- **全局元素**：顶部固定栏（快捷搜索、全局通知、当前账号）、左侧折叠菜单、面包屑导航、操作反馈抽屉。

## 2. 页面与功能

### 2.1 仪表盘
- 关键指标：待审文章数、待审行程数、最近 7 日发布数、评论举报数。
- 审核队列快捷入口：按优先级列出最近提交的文章/行程。
- 审计日志最近记录：展示最近 5 条高危操作。

### 2.2 内容审核
- **文章审核列表**：
  - 筛选条件：状态、作者、提交时间、标签。
  - 操作：进入详情、快速通过、快速驳回、批量标记。
- **文章详情审核页**：
  - 左侧预览 Markdown；右侧展示元数据、历史审核记录、作者信息。
  - 审批动作：通过（可编辑字段后发布）、驳回（填写理由）。
  - 审核备注持久化。
- **草稿管理**：仅限作者与超级管理员查看，可协助排查问题草稿。

### 2.3 行程管理
- 行程列表：按时间轴显示，支持快速上下线。
- 审核流程与文章一致；
- 可以修改行程内容，行程海报

### 2.4 评论管理
- 评论列表：支持按文章、关键词
- 管理员操作：
  - 置顶或取消置顶。

### 2.5 用户与角色
- **用户列表**：搜索（昵称、邮箱）、筛选（角色、状态、注册时间）。
- **用户详情侧边抽屉**：基本信息、提交记录、评论数、封禁状态。
- **编辑用户资料**：管理员可修改头像、昵称；超级管理员可调整角色、封禁、重置密码。
- **提交记录页**：展示该用户的文章/行程/评论列表，支持导出。

### 2.6 我的账户（所有登录用户）
- 编辑头像、昵称、简介。
- 查看自己的文章、行程提交状态。
- 评论记录：按时间倒序列出，可快捷跳转到原文。
- 安全设置：绑定邮箱、修改密码、开启双重验证（选配）。

### 2.7 系统日志
- 审核日志：按资源、操作人、时间过滤；导出 CSV。
- 登录日志：显示最近登录 IP、设备，支持黑名单。
- 操作异常：列出权限拦截、失败的 API 调用。

### 2.8 系统设置（仅超级管理员）
- 角色权限配置：勾选式矩阵，更新后实时生效。
- 内容策略：敏感词维护、评论自动审核规则。
- 站点配置：主题色、导航菜单、首页模块开关。

## 3. 交互规范

- 所有批量或危险操作需二次确认弹窗。
- 审核结果需即时 Toast + 持久化到审计日志。
- 长流程操作使用步骤条说明状态。
- 移动端以只读模式展示关键数据；主要操作限制在桌面端。

## 4. 技术实现建议

- **前端框架**：沿用 React + Tailwind + shadcn/ui，使用 React Query 管理数据请求与缓存。
- **布局**：使用 CSS Grid/ Flex 构建自适应布局，支持暗色模式。
- **权限控制**：
  - 路由层面：根据角色配置路由白名单。
  - 组件层面：封装 `Access` 组件，集中处理按钮显示与禁用。
- **状态管理**：关键模块（审核、列表筛选）使用 Zustand 或 Redux Toolkit 持久化查询条件。
- **国际化**：预留多语言结构（zh-CN / en-US），方便扩展。

## 5. 数据接口示意

- `GET /admin/posts?status=pending`：获取待审文章。
- `PUT /admin/posts/{id}/approve`：审核通过。
- `PUT /admin/posts/{id}/reject`：驳回并写入理由。
- `GET /admin/users/{id}/submissions`：获取用户提交记录。
- `GET /admin/logs?a=high_risk`：获取高危操作日志。

## 6. 权限映射摘要

| 模块 | 游客 | 注册用户 | 管理员 | 超级管理员 |
| ---- | ---- | -------- | ------ | ---------- |
| 仪表盘 | ❌ | ❌ | ✅ | ✅ |
| 内容审核 | ❌ | ❌ | ✅ | ✅ |
| 行程管理 | ❌ | ❌ | ✅ | ✅ |
| 评论管理 | ❌ | ❌ | ✅ | ✅ |
| 用户与角色 | ❌ | ❌ | ✅ (部分) | ✅ |
| 我的账户 | ❌ | ✅ | ✅ | ✅ |
| 系统日志 | ❌ | ❌ | ✅ (只读) | ✅ |
| 系统设置 | ❌ | ❌ | ❌ | ✅ |

