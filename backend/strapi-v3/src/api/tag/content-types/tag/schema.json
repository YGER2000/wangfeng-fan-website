export default {
  kind: 'collectionType',
  collectionName: 'tags',
  displayName: 'Tag',
  singularName: 'tag',
  pluralName: 'tags',
  description: '标签系统',
  attributes: {
    // 基础信息
    name: {
      type: 'string',
      required: true,
      unique: true,
      maxLength: 100,
    },
    slug: {
      type: 'uid',
      targetField: 'name',
      unique: true,
    },

    // 标签类型
    type: {
      type: 'enumeration',
      enum: ['article', 'video', 'gallery', 'common'],
      default: 'common',
    },

    // 批准状态
    approved: {
      type: 'boolean',
      default: false,
    },

    // 创建者信息
    createdBy: {
      type: 'relation',
      relation: 'manyToOne',
      target: 'plugin::users-permissions.user',
      inversedBy: 'createdTags',
    },

    // 关系
    articles: {
      type: 'relation',
      relation: 'manyToMany',
      target: 'api::article.article',
      inversedBy: 'tags',
    },
    videos: {
      type: 'relation',
      relation: 'manyToMany',
      target: 'api::video.video',
      inversedBy: 'tags',
    },
  },
};
